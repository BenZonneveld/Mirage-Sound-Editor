<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MirageDumper(staticlibsamplerate): wavesamples.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MirageDumper(staticlibsamplerate)&#160;<span id="projectnumber">1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('wavesamples_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>wavesamples.h</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* $Id: wavesamples.h,v 1.15 2008/01/23 22:42:31 root Exp $ */</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#include &quot;stdafx.h&quot;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;Mirage EditorDoc.h&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;mmsystem.h&gt;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef WAVESAMPLES</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define WAVESAMPLES</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a><a class="code" href="struct__riff__.html">00011</a> <span class="keyword">struct </span><a class="code" href="struct__riff__.html">_riff_</a>
<a name="l00012"></a>00012 {
<a name="l00013"></a>00013   _TCHAR riffID[4];     <span class="comment">//contains identifier &quot;RIFF&quot;</span>
<a name="l00014"></a>00014   DWORD riffSIZE;       <span class="comment">//File size minus 8 bytes</span>
<a name="l00015"></a>00015   _TCHAR riffFORMAT[4]; <span class="comment">//contains identifier &quot;WAVE&quot;</span>
<a name="l00016"></a>00016 };
<a name="l00017"></a>00017 
<a name="l00018"></a><a class="code" href="structWAVEFORM.html">00018</a> <span class="keyword">struct </span><a class="code" href="structWAVEFORM.html">WAVEFORM</a>
<a name="l00019"></a>00019 {
<a name="l00020"></a>00020   WORD wFormatTag;      <span class="comment">//format of digital sound (1 for uncompressed)</span>
<a name="l00021"></a>00021   WORD nChannels;       <span class="comment">//Number of channels (1 for mono and 2 for stereo)</span>
<a name="l00022"></a>00022   DWORD nSamplesPerSec; <span class="comment">//Number of samples per second</span>
<a name="l00023"></a>00023   DWORD nAvgBytesPerSec;<span class="comment">//Average number bytes of data per second</span>
<a name="l00024"></a>00024   WORD nBlockAlign;     <span class="comment">//Minimal data size for playing</span>
<a name="l00025"></a>00025   WORD wBitsPerSample;  <span class="comment">//Bits per sample (8 or 16)</span>
<a name="l00026"></a>00026 };
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="struct__fmt__.html">00028</a> <span class="keyword">struct </span><a class="code" href="struct__fmt__.html">_fmt_</a>
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030   _TCHAR fmtID[4];      <span class="comment">//contains identifier: &quot;fmt &quot; (with space)</span>
<a name="l00031"></a>00031   DWORD fmtSIZE;        <span class="comment">//contains the size of this block (for WAVE PCM 16)</span>
<a name="l00032"></a>00032   <a class="code" href="structWAVEFORM.html">WAVEFORM</a> fmtFORMAT;   <span class="comment">//structure WAVEFORMATEX but without cbSize field</span>
<a name="l00033"></a>00033 };
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="struct__data__.html">00035</a> <span class="keyword">struct </span><a class="code" href="struct__data__.html">_data_</a>
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037   _TCHAR dataID[4]; <span class="comment">//contains identifier: &quot;data&quot;</span>
<a name="l00038"></a>00038   DWORD dataSIZE;   <span class="comment">//data size</span>
<a name="l00039"></a>00039 };
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="structSAMPLELOOP.html">00041</a> <span class="keyword">struct </span><a class="code" href="structSAMPLELOOP.html">SAMPLELOOP</a>{
<a name="l00042"></a>00042   DWORD dwIdentifier;   <span class="comment">// Contains a unique number (ie, different than the ID number of any other SampleLoop structure).</span>
<a name="l00043"></a>00043   DWORD dwType;         <span class="comment">// Loop type: 0 = forward, 1 = Alternating Loop, 2 = Loop Backward, 3-31 = reserved, 32-? = sampler specific.</span>
<a name="l00044"></a>00044   DWORD dwStart;        <span class="comment">// The startpoint of the loop. In other words, it&#39;s the byte offset from the start of waveformData[], where an offset of 0 would be at the start of the waveformData[] array (ie, the loop start is at the very first sample point).</span>
<a name="l00045"></a>00045   DWORD dwEnd;          <span class="comment">// Bye offset indicating the end of the loop.</span>
<a name="l00046"></a>00046   DWORD dwFraction;     <span class="comment">// fine-tuning for loop fractional areas between samples.</span>
<a name="l00047"></a>00047   DWORD dwPlayCount;    <span class="comment">// times to play the loop. A value of 0 specifies an infinite sustain loop (ie, the wave keeps looping until some external force interrupts playback, such as the musician releasing the key that triggered that wave&#39;s playback).</span>
<a name="l00048"></a>00048 };
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="struct__sampler__.html">00050</a> <span class="keyword">struct </span><a class="code" href="struct__sampler__.html">_sampler_</a> {
<a name="l00051"></a>00051   _TCHAR    samplerID[4];       <span class="comment">// Contains identifier: &quot;smpl&quot;</span>
<a name="l00052"></a>00052   DWORD     samplerSize;        <span class="comment">// the number of bytes in the chunk, </span>
<a name="l00053"></a>00053                                 <span class="comment">// not counting the 8 bytes used by ID </span>
<a name="l00054"></a>00054                                 <span class="comment">// and Size fields nor any possible pad </span>
<a name="l00055"></a>00055                                 <span class="comment">// byte needed to make the chunk an even size </span>
<a name="l00056"></a>00056                                 <span class="comment">// (ie, chunkSize is the number of remaining bytes</span>
<a name="l00057"></a>00057                                 <span class="comment">// in the chunk after the chunkSize field, </span>
<a name="l00058"></a>00058                                 <span class="comment">// not counting any trailing pad byte).</span>
<a name="l00059"></a>00059   DWORD     Manufacturer;       <span class="comment">// MMA Manufacturer ID ( 0x0F for Ensoniq)</span>
<a name="l00060"></a>00060   DWORD     Product;            <span class="comment">// Product Code for the intended sampler ( 0x01 for the Mirage )</span>
<a name="l00061"></a>00061   DWORD     SamplePeriod;       <span class="comment">// The period of one sample in nanoseconds (normally 1/nSamplesPerSec from the Format chunk. But note that this field allows finer tuning than nSamplesPerSec). For example, 44.1 KHz would be specified as 22675 (0x00005893).</span>
<a name="l00062"></a>00062   DWORD     MIDIUnityNote;      <span class="comment">// The MIDI note number at which the instrument plays back the waveform data without pitch modification (ie, at the same sample rate that was used when the waveform was created). This value ranges 0 through 127, inclusive. Middle C is 60.</span>
<a name="l00063"></a>00063   DWORD     MIDIPitchFraction;  <span class="comment">// The fraction of a semitone up from the specified dwMIDIUnityNote. A value of 0x80000000 is 1/2 semitone (50 cents); a value of 0x00000000 represents no fine tuning between semitones.</span>
<a name="l00064"></a>00064   DWORD     SMPTEFormat;        <span class="comment">// Should be 0 for the Mirage</span>
<a name="l00065"></a>00065   DWORD     SMPTEOffset;        <span class="comment">// Shoudl be 0 for the Mirage</span>
<a name="l00066"></a>00066   DWORD     cSampleLoops;       <span class="comment">// The number (count) of SampleLoop structures that are appended to this chunk.</span>
<a name="l00067"></a>00067   DWORD     cbSamplerData;      <span class="comment">// Should be 0</span>
<a name="l00068"></a>00068   <span class="keyword">struct    </span><a class="code" href="structSAMPLELOOP.html">SAMPLELOOP</a>  Loops;
<a name="l00069"></a>00069 };
<a name="l00070"></a>00070 
<a name="l00071"></a><a class="code" href="struct__instrument__.html">00071</a> <span class="keyword">struct </span><a class="code" href="struct__instrument__.html">_instrument_</a> {
<a name="l00072"></a>00072     _TCHAR  chunk_id[4];            <span class="comment">// Contains identifier: &quot;inst&quot;</span>
<a name="l00073"></a>00073     DWORD   inst_size;              <span class="comment">// Chunk Data Size (8)</span>
<a name="l00074"></a>00074     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   unshifted_note; <span class="comment">// Unshifted Note   0 - 127</span>
<a name="l00075"></a>00075     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   fine_tune;      <span class="comment">// Fine Tune (dB)   -50 - +50</span>
<a name="l00076"></a>00076     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   gain;           <span class="comment">// Gain     -64 - +64</span>
<a name="l00077"></a>00077     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   low_note;       <span class="comment">// Low Note     0 - 127</span>
<a name="l00078"></a>00078     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   high_note;      <span class="comment">// High Note    0 - 127</span>
<a name="l00079"></a>00079     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   low_velocity;   <span class="comment">// Low Velocity     1 - 127</span>
<a name="l00080"></a>00080     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   high_velocity;  <span class="comment">// High Velocity    1 - 127</span>
<a name="l00081"></a>00081     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   padding;        <span class="comment">// should be zero</span>
<a name="l00082"></a>00082 };
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="preprocessor">#pragma pack (1)</span>
<a name="l00085"></a><a class="code" href="struct__WaveSample__.html">00085</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="struct__WaveSample__.html">_WaveSample_</a>
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087     <span class="keyword">struct </span><a class="code" href="struct__riff__.html">_riff_</a>           riff_header;
<a name="l00088"></a>00088     <span class="keyword">struct </span><a class="code" href="struct__fmt__.html">_fmt_</a>            waveFormat;
<a name="l00089"></a>00089     <span class="keyword">struct </span><a class="code" href="struct__sampler__.html">_sampler_</a>        sampler;
<a name="l00090"></a>00090     <span class="keyword">struct </span><a class="code" href="struct__instrument__.html">_instrument_</a>     instrument;
<a name="l00091"></a>00091     <span class="keyword">struct </span><a class="code" href="struct__data__.html">_data_</a>           data_header;
<a name="l00092"></a>00092     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       SampleData[0xFFFF]; <span class="comment">// The actual waveform data</span>
<a name="l00093"></a>00093 <span class="comment">//  unsigned char       SampleData[0x10000];    // The actual waveform data</span>
<a name="l00094"></a>00094     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       checksum;           <span class="comment">// Checksum formed as a modulo 128 add of each nybble and the pagecount</span>
<a name="l00095"></a>00095     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>       samplepages;        <span class="comment">// Number of Mirage pages in the sample.</span>
<a name="l00096"></a>00096 };
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="keyword">typedef</span> <span class="keywordtype">short</span>   AudioWord;
<a name="l00099"></a>00099 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   AudioByte;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="struct__WaveSample__.html">_WaveSample_</a> WaveSample;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="keywordtype">void</span> CreateRiffWave(<span class="keywordtype">int</span> SampleNumber, <span class="keywordtype">int</span> UpperLower, BOOL LoopSwitch);
<a name="l00104"></a>00104 BOOL CreateFromMirage(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> SampleNumber, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ul_Wavesample);
<a name="l00105"></a>00105 <span class="keywordtype">void</span> PlayWaveData(<span class="comment">/*MWAV hWAV*/</span> LPVOID parameter);
<a name="l00106"></a>00106 LPSTR GetWaveSample(<span class="keyword">struct</span> <a class="code" href="struct__WaveSample__.html">_WaveSample_</a> * Get_sWav, <a class="code" href="classCMirageEditorDoc.html">CMirageEditorDoc</a>* pDoc);
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>wavesamples.h</b>      </li>
<hr><address style="align: right;"><small>
Generated on Wed Mar 2 2011 11:34:32 for MirageDumper(staticlibsamplerate) by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.7.3 using KingsTools</small></address>
</body>
</html>
